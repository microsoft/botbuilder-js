// replace.js

var replace = require('replace-in-file');


var options = [
    {
        "files":    "generated/**/*.ts",
        "from":     "as Models from \"./models\"",
        "to":       "as Models from \"botbuilder-schema\""
    }, {
        "files":    "generated/**/*.ts",
        "from":     "as Models from \"../models\"",
        "to":       "as Models from \"botbuilder-schema\""
    }, {
        "files":    "generated/models/index.ts",
        "from":     /\?\: /g,
        "to":       ": "
    }, {
        "files":    "generated/models/index.ts",
        "from":     "\/*\n * Code generated by Microsoft (R) AutoRest Code Generator.\n * Changes may cause incorrect behavior and will be lost if the code is\n * regenerated.\n *\/",
        "to":       "\/**\n * @module botbuilder-schema\n *\/\n\/**\n * Copyright (c) Microsoft Corporation. All rights reserved.  \n * Licensed under the MIT License.\n *\/"
    }, {
        "files":    "generated/**/*.ts",
        "from":     "\/*\n * Code generated by Microsoft (R) AutoRest Code Generator.\n * Changes may cause incorrect behavior and will be lost if the code is\n * regenerated.\n *\/",
        "to":       "\/**\n * @module botframework-connector\n *\/\n\/**\n * Copyright (c) Microsoft Corporation. All rights reserved.  \n * Licensed under the MIT License.\n *\/"
    }
]

function next() {
    if(options.length === 0) {
        console.log("done!")
        return;
    }

    replace(options.shift())
        .then(changes => {
            if(changes.length) console.log('Modified files:', changes.join(', '));
            next();
        })
        .catch(error => {
            console.error('Error occurred:', error);
        });    
}

next();