jobs:
  - job: Run_Tests
    steps:
      # - task: DownloadPipelineArtifact@2
      #   inputs:
      #     artifact: CustomizedReactApp
      #     path: $(ReactProjectDir)
      
      # - powershell: ls $(ReactProjectDir)/node_modules/bot*
      #   displayName: 'Show react-app node modules that start with bot'
      #   workingDirectory: $(ReactProjectDir)
      
      # - powershell: type $(ReactProjectDir)/package.json
      #   displayName: type react-app/package.json
      #   workingDirectory: $(ReactProjectDir)

      # - powershell: start powershell {yarn start}
      #   displayName: 'Serve react-app (yarn start), opening new console'
      #   workingDirectory: $(ReactProjectDir)
      
      - powershell: npm install
        displayName: 'npm install in tests directory'
        workingDirectory: $(TestsDir)

      - powershell: Start-Sleep -Seconds 90;
        displayName: 'Allowing React App to serve. Sleeping 90 seconds'

      - powershell: npm test
        displayName: 'Run Tests: npm test'
        workingDirectory: $(TestsDir)
